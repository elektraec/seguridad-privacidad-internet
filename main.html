<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacidad y Seguridad en Internet</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuente Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <!-- Iconos de Lucide -->
    <script src="https://unpkg.com/lucide-react@latest/dist/lucide-react.js"></script>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        
        /* --- Estilos para Quiz y Actividades --- */
        
        /* Estilos para el quiz */
        .option-btn {
            transition: all 0.2s ease;
        }
        .option-btn.correct {
            background-color: #d1fae5; /* Verde claro */
            border-color: #10b981; /* Verde */
            color: #065f46; /* Verde oscuro */
        }
        .option-btn.incorrect {
            background-color: #fee2e2; /* Rojo claro */
            border-color: #ef4444; /* Rojo */
            color: #991b1b; /* Rojo oscuro */
        }
        .option-btn:disabled {
            opacity: 0.8;
            cursor: not-allowed;
        }
        
        /* Estilos para "Mito o Realidad" */
        .myth-btn {
            transition: all 0.2s ease;
        }
        .myth-btn.correct {
            background-color: #10b981; /* Verde */
            color: white;
            transform: scale(1.05);
        }
        .myth-btn.incorrect {
            background-color: #ef4444; /* Rojo */
            color: white;
            transform: scale(1.05);
        }
        .myth-btn:disabled {
            opacity: 0.7;
        }

        /* Estilos para los "hotspots" del simulador de phishing */
        .phishing-hotspot {
            background-color: rgba(255, 235, 59, 0.3); /* Amarillo translúcido */
            border-bottom: 2px dashed #f59e0b; /* Naranja */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .phishing-hotspot:hover {
            background-color: rgba(255, 235, 59, 0.6);
        }
        
        /* Estilos para Toggle de Privacidad */
        .toggle-checkbox:checked {
            background-color: #2563eb; /* Azul */
        }
        .toggle-checkbox:checked + .toggle-label {
            transform: translateX(20px);
        }
        .toggle-label {
            transition: transform 0.2s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-gray-800">Privacidad y Seguridad</h1>
            <div class="hidden md:flex space-x-6">
                <a href="#fichas" class="text-gray-600 hover:text-blue-600 font-medium">Fichas de Aprendizaje</a>
                <a href="#actividades" class="text-gray-600 hover:text-blue-600 font-medium">Actividades</a>
                <a href="#quiz" class="text-gray-600 hover:text-blue-600 font-medium">Cuestionario</a>
            </div>
            <!-- Menú Móvil (simple) -->
            <div class="md:hidden">
                <a href="#fichas" class="text-sm text-gray-600 hover:text-blue-600 p-2">Fichas</a>
                <a href="#actividades" class="text-sm text-gray-600 hover:text-blue-600 p-2">Act.</a>
                <a href="#quiz" class="text-sm text-gray-600 hover:text-blue-600 p-2">Quiz</a>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <main>
        <section class="bg-gray-900 text-white py-20 md:py-32 px-6">
            <div class="container mx-auto max-w-4xl text-center">
                <h2 class="text-4xl md:text-6xl font-extrabold mt-4 mb-6">Guía de Privacidad y Seguridad en Internet</h2>
                <p class="text-lg md:text-xl text-gray-300 mb-12">Aprende a proteger tus dispositivos, tus datos y tu identidad en el mundo digital con estas fichas y actividades interactivas.</p>
                <a href="#fichas" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-700 transition-all text-lg">
                    Comenzar a Aprender
                </a>
            </div>
        </section>

        <!-- Sección de Fichas (Tarjetas) -->
        <section id="fichas" class="py-20 px-6">
            <div class="container mx-auto">
                <h3 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-16">Galería de Fichas de Aprendizaje</h3>
                <p class="text-center text-lg text-gray-600 mb-12 max-w-3xl mx-auto">Basado en la guía de AEPD e INCIBE, explora estos conceptos clave para tu seguridad.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <!-- Ficha 2: Contraseñas -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-pass"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 2: Contraseñas Robustas</h4>
                        <p class="text-gray-600">Son tu primera línea de defensa. Aprende a crear claves fuertes y a no repetirlas en distintos servicios.</p>
                    </div>

                    <!-- Ficha 3: Verificación 2 Pasos -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-2fa"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 3: Verificación en Dos Pasos</h4>
                        <p class="text-gray-600">Añade una capa extra de seguridad. Aunque roben tu contraseña, no podrán entrar sin tu móvil.</p>
                    </div>

                    <!-- Ficha 4: Copias de Seguridad -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-backup"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 4: Copias de Seguridad</h4>
                        <p class="text-gray-600">No esperes a tener un problema. Aprende a guardar tu información importante para no perderla.</p>
                    </div>

                    <!-- Ficha 12: Phishing -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-phishing"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 12: Phishing</h4>
                        <p class="text-gray-600">El fraude que intenta robar tus datos. Aprende a identificar correos y mensajes falsos.</p>
                    </div>

                    <!-- Ficha 9: Redes Sociales -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-social"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 9: Privacidad en Redes Sociales</h4>
                        <p class="text-gray-600">¿Quién puede ver lo que publicas? Configura tu perfil para controlar tu información personal.</p>
                    </div>
                    
                    <!-- Ficha 1: Dispositivos y Wi-Fi -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-wifi"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 1 y 13: Wi-Fi y Dispositivos</h4>
                        <p class="text-gray-600">Proteger tu móvil contra robo y apps maliciosas es vital. Cuidado con las redes Wi-Fi públicas.</p>
                    </div>

                    <!-- Ficha 15: La Nube -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-cloud"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 15: Seguridad en la Nube</h4>
                        <p class="text-gray-600">Guardar archivos en la nube es útil, pero debes saber cómo protegerlos y quién puede acceder a ellos.</p>
                    </div>

                    <!-- Ficha 11: Noticias Falsas -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-news"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 11: Información Veraz</h4>
                        <p class="text-gray-600">No toda la información en Internet es cierta. Aprende a identificar bulos y noticias falsas.</p>
                    </div>

                    <!-- Ficha 17: Control Parental -->
                    <div class="bg-white rounded-xl shadow-lg p-8 transform transition-transform hover:scale-105">
                        <div class="flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6" id="icon-parental"></div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">Ficha 17: Mediación Parental</h4>
                        <p class="text-gray-600">Acompaña a los menores en el uso de Internet, conoce los riesgos y usa herramientas de control parental.</p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Sección de Actividades Interactivas -->
        <section id="actividades" class="py-20 px-6 bg-white">
            <div class="container mx-auto">
                <h3 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-16">Actividades Interactivas</h3>

                <!-- Actividad 1: Mito o Realidad -->
                <div class="bg-gray-50 rounded-xl shadow-2xl p-6 md:p-10 mb-16 max-w-3xl mx-auto">
                    <h4 class="text-2xl font-bold text-gray-800 mb-2">Actividad 1: Mito o Realidad</h4>
                    <p class="text-gray-600 mb-6">Pon a prueba tu conocimiento. ¿Puedes distinguir los mitos de las realidades?</p>
                    
                    <div id="myth-buster-game">
                        <p id="myth-text" class="text-xl font-semibold text-gray-700 mb-6 text-center min-h-[100px]">Cargando mito...</p>
                        <div class="flex justify-center gap-4">
                            <button id="myth-btn-true" class="myth-btn w-1/2 md:w-1/3 bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700">Realidad</button>
                            <button id="myth-btn-false" class="myth-btn w-1/2 md:w-1/3 bg-gray-700 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-800">Mito</button>
                        </div>
                        <div id="myth-feedback" class="mt-6 text-center text-lg font-medium"></div>
                    </div>
                </div>
                
                <!-- Actividad 2: Simulador de Privacidad -->
                <div class="bg-gray-50 rounded-xl shadow-2xl p-6 md:p-10 mb-16 max-w-3xl mx-auto">
                    <h4 class="text-2xl font-bold text-gray-800 mb-2">Actividad 2: Configura tu Perfil</h4>
                    <p class="text-gray-600 mb-8">Estás configurando tu nuevo perfil en "ConectaRed". Ajusta las opciones y ve el consejo de seguridad (basado en Ficha 9).</p>

                    <div class="flex flex-col md:flex-row gap-8">
                        <!-- Columna de Opciones -->
                        <div class="w-full md:w-1/2 space-y-4">
                            <h5 class="text-lg font-semibold text-gray-700">Opciones de Privacidad</h5>
                            <!-- Opción 1 -->
                            <div class="flex items-center justify-between bg-white p-4 rounded-lg shadow-sm">
                                <label for="toggle-public" class="font-medium text-gray-700">Perfil Público</label>
                                <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                    <input type="checkbox" id="toggle-public" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" checked/>
                                    <label for="toggle-public" class-="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                                </div>
                            </div>
                            <!-- Opción 2 -->
                            <div class="flex items-center justify-between bg-white p-4 rounded-lg shadow-sm">
                                <label for="toggle-tag" class="font-medium text-gray-700">Cualquiera puede etiquetarme</label>
                                <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                    <input type="checkbox" id="toggle-tag" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" checked/>
                                    <label for="toggle-tag" class-="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                                </div>
                            </div>
                            <!-- Opción 3 -->
                            <div class="flex items-center justify-between bg-white p-4 rounded-lg shadow-sm">
                                <label for="toggle-location" class="font-medium text-gray-700">Compartir ubicación en fotos</label>
                                <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                    <input type="checkbox" id="toggle-location" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" checked/>
                                    <label for="toggle-location" class-="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Columna de Feedback -->
                        <div class="w-full md:w-1/2">
                            <h5 class="text-lg font-semibold text-gray-700">Consejo de Seguridad</h5>
                            <div id="privacy-feedback" class="mt-4 p-4 rounded-lg border-l-4 min-h-[150px]">
                                <!-- El feedback se cargará aquí -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Actividad 3: Simulador de Phishing -->
                <div class="bg-gray-50 rounded-xl shadow-2xl p-6 md:p-10 max-w-3xl mx-auto">
                    <h4 class="text-2xl font-bold text-gray-800 mb-2">Actividad 3: ¿Puedes detectar el Phishing?</h4>
                    <p class="text-gray-600 mb-8">Recibiste este correo (basado en Ficha 12). Haz clic en las áreas sospechosas (con línea punteada) para ver la explicación.</p>
                    
                    <div class="border border-gray-300 rounded-lg bg-white shadow-lg">
                        <!-- Header del email falso -->
                        <div class="p-4 border-b">
                            <p><strong>De:</strong> <span class="phishing-hotspot" data-flag="1">BancoSeguro &lt;notificaciones@bancoseguro-soporte.com&gt;</span></p>
                            <p><strong>Asunto:</strong> <span class="phishing-hotspot" data-flag="2">ALERTA DE SEGURIDAD: Su cuenta ha sido bloqueada</span></p>
                        </div>
                        
                        <!-- Cuerpo del email falso -->
                        <div class="p-6 text-gray-700">
                            <img src="https://placehold.co/150x50/e0e7ff/3730a3?text=Logo+BancoSeguro" alt="Logo falso del banco" class="mb-6">
                            <p class="mb-4"><span class="phishing-hotspot" data-flag="3">Estimado Cliente,</span></p>
                            <p class="mb-4">Detectamos un inicio de sesión inusual en su cuenta. Como medida de precaución, hemos <span class="phishing-hotspot" data-flag="2">bloqueado temporalmente su cuenta</span>.</p>
                            <p class="mb-4">Para restaurar el acceso, debe verificar su identidad inmediatamente. De lo contrario, su cuenta será suspendida.</p>
                            <p class="text-center my-8">
                                <a href="#" onclick="return false;" class="phishing-hotspot bg-red-600 text-white font-bold py-3 px-6 rounded-lg inline-block" data-flag="4">
                                    Haga clic aquí para verificar
                                </a>
                            </p>
                            <p class="text-sm text-gray-500">Gracias,<br>El equipo de <span class="phishing-hotspot" data-flag="1">BancoSeguro</span></p>
                        </div>
                    </div>

                    <!-- Contenedor de explicaciones -->
                    <div id="phishing-explanations" class="mt-6">
                        <div id="explanation-default" class="p-5 bg-blue-50 border-l-4 border-blue-500 text-blue-800 rounded-r-lg">
                            <h5 class="font-bold">¡Analiza el correo!</h5>
                            <p>Haz clic en las áreas sospechosas para ver la explicación.</p>
                        </div>
                        <div id="explanation-1" class="hidden p-5 bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg">
                            <h5 class="font-bold">Alerta: Dominio del Remitente</h5>
                            <p>El dominio <strong>bancoseguro-soporte.com</strong> parece sospechoso. Los bancos reales usan dominios simples como <strong>@bancoseguro.com</strong>.</p>
                        </div>
                        <div id="explanation-2" class="hidden p-5 bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg">
                            <h5 class="font-bold">Alerta: Tono de Urgencia</h5>
                            <p>Frases como "cuenta bloqueada" o "suspensión permanente" crean pánico. Los atacantes te presionan para que actúes rápido sin pensar.</p>
                        </div>
                        <div id="explanation-3" class="hidden p-5 bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg">
                            <h5 class="font-bold">Alerta: Saludo Genérico</h5>
                            <p>"Estimado Cliente" es una señal de alerta. Tu banco real casi siempre usará tu nombre completo.</p>
                        </div>
                        <div id="explanation-4" class="hidden p-5 bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg">
                            <h5 class="font-bold">Alerta: Enlace Sospechoso</h5>
                            <p>¡Nunca hagas clic! Si pasas el mouse por encima (sin hacer clic), el navegador mostraría la URL real, que no sería la del banco.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección de Evaluación (Quiz) -->
        <section id="quiz" class="py-20 px-6 bg-gray-100">
            <div class="container mx-auto max-w-2xl">
                <h3 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-12">Cuestionario Final</h3>
                
                <div id="quiz-container" class="bg-white p-8 rounded-xl shadow-2xl">
                    <h4 id="question-number" class="text-sm font-semibold text-blue-600 mb-2"></h4>
                    <p id="question-text" class="text-xl font-semibold text-gray-800 mb-6 min-h-[70px]">Cargando pregunta...</p>
                    
                    <div id="options-container" class="space-y-4">
                        <!-- Opciones de respuesta se cargarán aquí -->
                    </div>
                    
                    <button id="next-btn" class="hidden mt-8 w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all">
                        Siguiente Pregunta
                    </button>
                </div>

                <div id="results-container" class="hidden text-center bg-white p-10 rounded-xl shadow-2xl">
                    <h4 class="text-3xl font-bold text-gray-800 mb-4">¡Evaluación Completa!</h4>
                    <p class="text-xl text-gray-600 mb-6">Tu puntuación final es:</p>
                    <p id="score-text" class="text-6xl font-extrabold text-blue-600 mb-8">5/5</p>
                    <p id="score-feedback" class="text-lg text-gray-700 mb-8">¡Excelente trabajo!</p>
                    <button id="retry-btn" class="bg-gray-200 text-gray-800 font-bold py-3 px-8 rounded-lg hover:bg-gray-300 transition-all">
                        Intentar de Nuevo
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-400 py-10 px-6">
        <div class="container mx-auto text-center">
            <p>&copy; 2025 Guía de Privacidad y Seguridad. Basado en material de AEPD e INCIBE.</p>
        </div>
    </footer>

    <!-- Script para renderizar iconos de Lucide -->
    <script>
        const iconMap = {
            "icon-pass": "KeyRound",
            "icon-2fa": "SmartphoneNfc",
            "icon-backup": "DatabaseBackup",
            "icon-phishing": "Fish",
            "icon-social": "Users",
            "icon-wifi": "Wifi",
            "icon-cloud": "Cloud",
            "icon-news": "Newspaper",
            "icon-parental": "Shield"
        };
        Object.keys(iconMap).forEach(id => {
            const container = document.getElementById(id);
            if(container) {
                const iconName = iconMap[id];
                ReactDOM.render(
                    React.createElement(lucide[iconName], { size: 32, className: "text-blue-600" }),
                    container
                );
            }
        });
    </script>

    <!-- JavaScript Interactivo -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Lógica para Actividad 1: "Mito o Realidad" ---
            const myths = [
                { text: "El 'modo incógnito' del navegador me hace 100% anónimo en Internet.", answer: false, explanation: "MITO. El modo incógnito solo evita que tu navegador guarde el historial. Tu proveedor de Internet y los sitios web aún pueden rastrearte. (Ficha 8)" },
                { text: "Mi red Wi-Fi de casa es segura tal como la instaló el técnico.", answer: false, explanation: "MITO. Muchas redes Wi-Fi vienen con contraseñas por defecto. Debes cambiarla por una robusta y usar cifrado WPA2 o WPA3. (Ficha 13)" },
                { text: "Si una web tiene 'HTTPS' y un candado, es 100% fiable y no es una estafa.", answer: false, explanation: "MITO. HTTPS solo significa que la *conexión* está cifrada. Los estafadores (phishing) también usan HTTPS para parecer legítimos. (Ficha 5)" },
                { text: "Toda la información que se publica en Internet es cierta.", answer: false, explanation: "MITO. Existen muchos bulos y noticias falsas. Siempre debes contrastar la información con fuentes fiables. (Ficha 11)" },
                { text: "No pasa nada por usar la misma contraseña en todos sitios, si es muy fuerte.", answer: false, explanation: "MITO. Si un servicio sufre una filtración, los atacantes usarán esa contraseña para intentar entrar en todas tus otras cuentas. (Ficha 2)" }
            ];
            
            let currentMythIndex = 0;
            const mythTextEl = document.getElementById('myth-text');
            const mythBtnTrue = document.getElementById('myth-btn-true');
            const mythBtnFalse = document.getElementById('myth-btn-false');
            const mythFeedbackEl = document.getElementById('myth-feedback');

            function loadMyth() {
                if (currentMythIndex >= myths.length) {
                    mythTextEl.textContent = "¡Has completado todos los mitos!";
                    mythBtnTrue.classList.add('hidden');
                    mythBtnFalse.classList.add('hidden');
                    mythFeedbackEl.innerHTML = '<button id="retry-myth-btn" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">Repetir</button>';
                    document.getElementById('retry-myth-btn').addEventListener('click', startMythBuster);
                    return;
                }
                
                const myth = myths[currentMythIndex];
                mythTextEl.textContent = myth.text;
                mythFeedbackEl.textContent = '';
                mythBtnTrue.disabled = false;
                mythBtnFalse.disabled = false;
                mythBtnTrue.classList.remove('correct', 'incorrect');
                mythBtnFalse.classList.remove('correct', 'incorrect');
            }

            function checkMyth(userAnswer) {
                const myth = myths[currentMythIndex];
                mythBtnTrue.disabled = true;
                mythBtnFalse.disabled = true;
                
                if (userAnswer === myth.answer) {
                    mythFeedbackEl.textContent = "¡Correcto! " + myth.explanation;
                    mythFeedbackEl.style.color = "#065f46"; // Verde oscuro
                    if(userAnswer === true) mythBtnTrue.classList.add('correct');
                    else mythBtnFalse.classList.add('correct');
                } else {
                    mythFeedbackEl.textContent = "Incorrecto. " + myth.explanation;
                    mythFeedbackEl.style.color = "#991b1b"; // Rojo oscuro
                    if(userAnswer === true) mythBtnTrue.classList.add('incorrect');
                    else mythBtnFalse.classList.add('incorrect');
                }
                
                currentMythIndex++;
                setTimeout(loadMyth, 4000); // Cargar siguiente mito después de 4 seg
            }
            
            function startMythBuster() {
                currentMythIndex = 0;
                mythBtnTrue.classList.remove('hidden');
                mythBtnFalse.classList.remove('hidden');
                loadMyth();
            }

            mythBtnTrue.addEventListener('click', () => checkMyth(true));
            mythBtnFalse.addEventListener('click', () => checkMyth(false));
            startMythBuster();

            
            // --- Lógica para Actividad 2: Simulador de Privacidad ---
            const togglePublic = document.getElementById('toggle-public');
            const toggleTag = document.getElementById('toggle-tag');
            const toggleLocation = document.getElementById('toggle-location');
            const privacyFeedback = document.getElementById('privacy-feedback');

            function updatePrivacyFeedback() {
                let advice = [];
                let isSecure = true;
                
                if (togglePublic.checked) {
                    advice.push("¡Cuidado! Tu perfil es público. Cualquiera en Internet puede ver tus fotos y publicaciones.");
                    isSecure = false;
                } else {
                    advice.push("¡Bien! Tu perfil es privado. Solo tus amigos aprobados pueden ver tu contenido.");
                }
                
                if (toggleTag.checked) {
                    advice.push("Permites que cualquiera te etiquete. Esto podría usarse para asociarte con spam o contenido que no apruebas.");
                    isSecure = false;
                } else {
                    advice.push("¡Buena elección! Has desactivado el etiquetado abierto.");
                }

                if (toggleLocation.checked) {
                    advice.push("Estás compartiendo tu ubicación (geotag) en las fotos. Esto puede decirle a extraños dónde vives o cuándo no estás en casa.");
                    isSecure = false;
                }
                
                if (isSecure && !toggleLocation.checked) {
                    advice = ["¡Excelente configuración! Tienes un control sólido sobre tu privacidad."];
                }

                privacyFeedback.innerHTML = advice.map(item => `<p class="mb-2">${item}</p>`).join('');
                
                if (isSecure) {
                    privacyFeedback.className = "mt-4 p-4 rounded-lg border-l-4 min-h-[150px] bg-green-50 border-green-500 text-green-800";
                } else {
                    privacyFeedback.className = "mt-4 p-4 rounded-lg border-l-4 min-h-[150px] bg-yellow-50 border-yellow-500 text-yellow-800";
                }
            }

            togglePublic.addEventListener('change', updatePrivacyFeedback);
            toggleTag.addEventListener('change', updatePrivacyFeedback);
            toggleLocation.addEventListener('change', updatePrivacyFeedback);
            updatePrivacyFeedback(); // Carga inicial


            // --- Lógica para Actividad 3: Simulador de Phishing ---
            const hotspots = document.querySelectorAll('.phishing-hotspot');
            const explanationsContainer = document.getElementById('phishing-explanations');
            
            hotspots.forEach(hotspot => {
                hotspot.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevenir que el enlace <a> navegue
                    const flag = hotspot.dataset.flag;
                    
                    // Ocultar todas las explicaciones
                    Array.from(explanationsContainer.children).forEach(child => {
                        child.classList.add('hidden');
                    });
                    
                    // Mostrar la explicación correcta
                    const explanationToShow = document.getElementById(`explanation-${flag}`);
                    if (explanationToShow) {
                        explanationToShow.classList.remove('hidden');
                    }
                });
            });


            // --- Lógica del Quiz Final ---
            const quizContainer = document.getElementById('quiz-container');
            const resultsContainer = document.getElementById('results-container');
            const questionNumberEl = document.getElementById('question-number');
            const questionTextEl = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const nextBtn = document.getElementById('next-btn');
            const scoreTextEl = document.getElementById('score-text');
            const scoreFeedbackEl = document.getElementById('score-feedback');
            const retryBtn = document.getElementById('retry-btn');

            const quizQuestions = [
                {
                    question: "¿Qué es la 'verificación en dos pasos'? (Ficha 3)",
                    options: ["Usar dos contraseñas diferentes", "Un antivirus y un firewall", "Usar tu contraseña y un código único de tu móvil", "Iniciar sesión dos veces"],
                    answer: "Usar tu contraseña y un código único de tu móvil"
                },
                {
                    question: "¿Cuál es el objetivo principal de una 'copia de seguridad'? (Ficha 4)",
                    options: ["Hacer que tu ordenador vaya más rápido", "Compartir archivos con amigos", "Recuperar tu información si pierdes el dispositivo o se daña", "Liberar espacio en el disco duro"],
                    answer: "Recuperar tu información si pierdes el dispositivo o se daña"
                },
                {
                    question: "¿Qué es el 'Grooming'? (Ficha 17)",
                    options: ["Cuando un adulto contacta a un menor con fines sexuales", "Limpiar tu ordenador de virus", "Una técnica para crear contraseñas seguras", "Un tipo de estafa por correo electrónico"],
                    answer: "Cuando un adulto contacta a un menor con fines sexuales"
                },
                {
                    question: "¿Qué riesgo principal tienen las apps P2P (eMule, BitTorrent)? (Ficha 16)",
                    options: ["Consumen mucha batería", "Son muy lentas para descargar", "Compartir accidentalmente tus carpetas privadas con extraños", "Solo funcionan en redes Wi-Fi públicas"],
                    answer: "Compartir accidentalmente tus carpetas privadas con extraños"
                },
                {
                    question: "¿Qué derecho te permite solicitar a los buscadores que eliminen resultados sobre ti? (Ficha 7)",
                    options: ["Derecho a la Privacidad", "Derecho al Olvido", "Derecho de Acceso", "Derecho de Rectificación"],
                    answer: "Derecho al Olvido"
                }
            ];

            let currentQuestionIndex = 0;
            let score = 0;

            function startQuiz() {
                currentQuestionIndex = 0;
                score = 0;
                quizContainer.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
                nextBtn.classList.add('hidden');
                loadQuizQuestion();
            }

            function loadQuizQuestion() {
                // Resetear estado
                nextBtn.classList.add('hidden');
                optionsContainer.innerHTML = '';
                
                const question = quizQuestions[currentQuestionIndex];
                
                questionNumberEl.textContent = `Pregunta ${currentQuestionIndex + 1} de ${quizQuestions.length}`;
                questionTextEl.textContent = question.question;

                question.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.classList.add('option-btn', 'block', 'w-full', 'text-left', 'p-4', 'rounded-lg', 'border', 'border-gray-300', 'bg-white', 'hover:bg-gray-100');
                    button.addEventListener('click', () => selectAnswer(button, option, question.answer));
                    optionsContainer.appendChild(button);
                });
            }

            function selectAnswer(button, selectedOption, correctAnswer) {
                // Deshabilitar todos los botones
                Array.from(optionsContainer.children).forEach(btn => {
                    btn.disabled = true;
                });

                // Marcar correcto/incorrecto
                if (selectedOption === correctAnswer) {
                    button.classList.add('correct');
                    score++;
                } else {
                    button.classList.add('incorrect');
                    // Mostrar la correcta
                    Array.from(optionsContainer.children).forEach(btn => {
                        if (btn.textContent === correctAnswer) {
                            btn.classList.add('correct');
                        }
                    });
                }
                
                // Mostrar botón de siguiente
                nextBtn.classList.remove('hidden');
            }

            nextBtn.addEventListener('click', () => {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizQuestions.length) {
                    loadQuizQuestion();
                } else {
                    showResults();
                }
            });
            
            retryBtn.addEventListener('click', startQuiz);

            function showResults() {
                quizContainer.classList.add('hidden');
                resultsContainer.classList.remove('hidden');
                
                scoreTextEl.textContent = `${score}/${quizQuestions.length}`;
                
                let feedback = '';
                if (score === quizQuestions.length) {
                    feedback = '¡Excelente trabajo! Eres un experto en seguridad digital.';
                } else if (score >= quizQuestions.length * 0.7) {
                    feedback = '¡Muy bien! Tienes bases sólidas en seguridad.';
                } else {
                    feedback = '¡Sigue aprendiendo! Repasa las fichas para mejorar.';
                }
                scoreFeedbackEl.textContent = feedback;
            }

            // Iniciar el quiz al cargar
            startQuiz();
        });
    </script>
</body>
</html>
